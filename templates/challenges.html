{% extends "base.html" %}

{% block content %}
<div class="card border-0 shadow-sm p-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <div>
      <h2 class="h4 fw-semibold mb-1">Каталог челленджей</h2>
      <p class="text-muted mb-0">Выберите задание и зарабатывайте очки.</p>
    </div>
    <span class="badge bg-primary">{{ user.points }} очков</span>
  </div>

  <div class="row g-3">
    {% for challenge in challenges %}
      <div class="col-md-6">
        <div class="card h-100 border-0 shadow-sm">
          <div class="card-body">
            <h3 class="h6 fw-semibold">{{ challenge.title }}</h3>
            <p class="text-muted">{{ challenge.description }}</p>
            <div class="d-flex justify-content-between align-items-center">
              <span class="badge bg-light text-dark border">{{ challenge.points }} очков</span>
              {% if challenge.id in completed_ids %}
                <span class="badge bg-success">Выполнено</span>
              {% else %}
                <form method="post" action="{{ url_for('complete_challenge', challenge_id=challenge.id) }}">
                  <button class="btn btn-outline-primary btn-sm" type="submit">Выполнить</button>
                </form>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
